<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XOXO Messenger</title>
    <!-- –ò–∫–æ–Ω–∫–∞ –≤–∫–ª–∞–¥–∫–∏ -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    
    <!-- –®—Ä–∏—Ñ—Ç—ã -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- –°—Ç–∏–ª–∏ (–ú–æ–¥—É–ª—å–Ω—ã–µ) -->
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/chat-window.css">
    <link rel="stylesheet" href="css/settings.css">
</head>
<body>

    <div class="app-container">
        
        <!-- –õ–ï–í–ê–Ø –ü–ê–ù–ï–õ–¨ (SIDEBAR) -->
        <aside class="sidebar">
            <!-- –õ–æ–≥–æ—Ç–∏–ø -->
            <div class="brand">
                <svg width="48" height="48" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="brand_grad" x1="0" y1="0" x2="100" y2="100" gradientUnits="userSpaceOnUse">
                            <stop offset="0%" stop-color="#ff4b6a" />
                            <stop offset="50%" stop-color="#8A2BE2" />
                            <stop offset="100%" stop-color="#00f2ff" />
                        </linearGradient>
                    </defs>
                    <g filter="drop-shadow(0 0 8px rgba(138, 43, 226, 0.6))">
                        <path d="M50 90C22 70 8 55 8 36C8 19 21 9 35 9C43 9 49 13 50 16C51 13 57 9 65 9C79 9 92 19 92 36C92 55 78 70 50 90Z" 
                              stroke="url(#brand_grad)" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" fill="rgba(255,255,255,0.03)"/>
                        <path d="M32 35 L42 53 M42 35 L32 53" stroke="white" stroke-width="4" stroke-linecap="round"/>
                        <circle cx="62" cy="44" r="9" stroke="white" stroke-width="4" fill="none"/>
                    </g>
                </svg>
                <div class="brand-text">
                    <span class="brand-title">XOXO</span>
                    <span class="brand-subtitle">MESSENGER</span>
                </div>
            </div>
            
            <!-- –°–ø–∏—Å–æ–∫ –∫–∞–Ω–∞–ª–æ–≤ -->
            <div class="nav-scroll">
                <div class="nav-category">–ì–õ–ê–í–ù–û–ï</div>
                <button class="nav-item active" data-room="general">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    <span>–û–±—â–∏–π —Ö–æ–ª–ª</span>
                </button>
                <button class="nav-item" data-room="love">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>
                    <span>–ü—Ä–∏–∑–Ω–∞–Ω–∏—è</span>
                </button>
                <div class="nav-category">–®–ö–û–õ–ê</div>
                <button class="nav-item" data-room="homework">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                    <span>–î–æ–º–∞—à–∫–∞</span>
                </button>
                <button class="nav-item" data-room="flood">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                    <span>–§–ª—É–¥–∏–ª–∫–∞</span>
                </button>
            </div>

            <!-- –ú–∏–Ω–∏-–ø—Ä–æ—Ñ–∏–ª—å –≤–Ω–∏–∑—É -->
            <div class="profile-card">
                <div class="avatar-wrapper" id="sidebar-avatar-wrap">
                    <!-- –°—é–¥–∞ JS –≤—Å—Ç–∞–≤–∏—Ç 3D canvas -->
                    <div id="webgl-avatar-container" class="webgl-container"></div>
                    <div class="status-dot" id="sidebar-status-dot"></div>
                </div>
                <div class="profile-meta">
                    <div class="username" id="user-display">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="subtext" id="user-status">–ù–∞–∂–º–∏ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                </div>
                <button id="btn-settings" class="icon-btn settings-gear">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                </button>
            </div>
        </aside>

        <!-- –ü–†–ê–í–ê–Ø –ü–ê–ù–ï–õ–¨ (–ß–ê–¢) -->
        <main class="chat-wrapper">
            <header class="chat-header">
                <div class="header-left">
                    <div class="room-icon">#</div>
                    <div class="room-info">
                        <h2 id="current-room-name">–û–±—â–∏–π —Ö–æ–ª–ª</h2>
                        <span class="room-desc">–ó–¥–µ—Å—å –æ–±—â–∞—é—Ç—Å—è –≤—Å–µ</span>
                    </div>
                </div>
            </header>

            <div id="chat-window">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
            </div>

            <div class="input-container">
                <!-- –ü–∞–Ω–µ–ª—å "–í—ã –æ—Ç–≤–µ—á–∞–µ—Ç–µ..." (–°–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) -->
                <div id="reply-bar" class="reply-bar">
                    <div>–û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é <span id="reply-to-name">Name</span></div>
                    <div id="cancel-reply" class="close-reply">‚úï</div>
                </div>

                <div class="input-box" id="main-input-box">
                    <input type="text" id="msg-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ..." autocomplete="off">
                    <button id="send-btn">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- –ú–ï–ù–Æ –°–û–û–ë–©–ï–ù–ò–ô (–ö–û–ù–¢–ï–ö–°–¢–ù–û–ï) -->
    <div id="context-menu" class="context-menu">
        <div class="menu-item" id="btn-edit">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</div>
        <div class="menu-item delete" id="btn-delete">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</div>
    </div>

    <!-- –û–ö–ù–û –ù–ê–°–¢–†–û–ï–ö (MODAL) -->
    <div id="profile-modal" class="modal-overlay">
        <div class="modal-window settings-modal">
            
            <!-- –õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –ü—Ä–µ–≤—å—é -->
            <div class="settings-sidebar">
                <div class="settings-preview-wrap">
                    <div id="preview-avatar-container" class="preview-avatar-large"></div>
                    <div class="preview-status-dot" id="preview-status-dot"></div>
                </div>
                <div class="settings-username-preview" id="preview-nickname">–ò–º—è</div>
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –û–ø—Ü–∏–∏ -->
            <div class="settings-content">
                <div class="settings-header">
                    <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è</h2>
                    <button id="btn-close-modal" class="close-cross">√ó</button>
                </div>

                <div class="settings-scroll-area">
                    
                    <!-- 1. –°—Ç–∞—Ç—É—Å -->
                    <div class="setting-group">
                        <label>–°—Ç–∞—Ç—É—Å</label>
                        <div class="status-selector">
                            <button class="status-btn online selected" data-status="online">
                                <span class="dot online"></span> –í —Å–µ—Ç–∏
                            </button>
                            <button class="status-btn busy" data-status="busy">
                                <span class="dot busy"></span> –ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å
                            </button>
                            <button class="status-btn offline" data-status="offline">
                                <span class="dot offline"></span> –ù–µ–≤–∏–¥–∏–º–∫–∞
                            </button>
                        </div>
                    </div>

                    <!-- 2. –≠—Ñ—Ñ–µ–∫—Ç—ã (–®–µ–π–¥–µ—Ä—ã) -->
                    <div class="setting-group">
                        <label>3D –≠—Ñ—Ñ–µ–∫—Ç</label>
                        <div class="shader-grid" id="effect-selector">
                            <div class="shader-card" data-val="liquid">
                                <div class="shader-icon">üíß</div>
                                <span>Liquid</span>
                            </div>
                            <div class="shader-card" data-val="glitch">
                                <div class="shader-icon">‚ö°</div>
                                <span>Glitch</span>
                            </div>
                            <div class="shader-card" data-val="radio">
                                <div class="shader-icon">üì∫</div>
                                <span>Radio</span>
                            </div>
                            <div class="shader-card" data-val="chainsaw">
                                <div class="shader-icon">ü©∏</div>
                                <span>Saw</span>
                            </div>
                        </div>
                    </div>

                    <!-- 3. –ö–∞—Ä—Ç–∏–Ω–∫–∏ -->
                    <div class="setting-group">
                        <label>–ê–≤–∞—Ç–∞—Ä</label>
                        <div class="avatar-grid" id="avatar-grid"></div>
                    </div>

                    <!-- 4. –î–∞–Ω–Ω—ã–µ -->
                    <div class="setting-group">
                        <label>–ò–º—è</label>
                        <input type="text" id="input-nickname" placeholder="–¢–≤–æ–µ –∏–º—è">
                    </div>
                    <div class="setting-group">
                        <label>–û–±–æ –º–Ω–µ</label>
                        <input type="text" id="input-bio" placeholder="–°—Ç–∞—Ç—É—Å...">
                    </div>

                    <!-- 5. –í—ã—Ö–æ–¥ -->
                    <div class="danger-zone">
                        <div class="danger-text">
                            <h4>–í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</h4>
                            <p>–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é –Ω–∞ —ç—Ç–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ</p>
                        </div>
                        <button id="btn-logout-settings" class="btn-logout-danger">–í—ã–π—Ç–∏</button>
                    </div>

                </div>
                
                <div class="settings-footer">
                    <button id="btn-save-profile" class="save-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>

        </div>
    </div>

    <!-- –ì–õ–ê–í–ù–´–ô –°–ö–†–ò–ü–¢ -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
